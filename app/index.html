<!DOCTYPE html>
<!-- much of the header is from the HTML5 boilerplate project -->
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>BRIL monitor demo</title>
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
      <link rel="icon" href="/favicon.ico" type="image/x-icon">

      <link rel="stylesheet" href="css/bootstrap.min.css">
      <style>
          body {
              padding-top: 5px;
              padding-bottom: 20px;
          }
      </style>
      <link rel="stylesheet" href="css/bootstrap-theme.min.css">
      <link rel="stylesheet" href="css/main.css">

      <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>

  </head>

  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
  
 <!-- <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <img class="navbar-left" src="/img/bril_64.png" , style="padding-right: 20px", alt="BRIL logo">
        <a class="navbar-brand" href="#">BRIL monitor demo</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
          <img class="navbar-right" src="/img/CMSlogo_color_nolabel_64.png" alt="BRIL logo">
       </div>--><!--/.navbar-collapse -->
   <!-- </div>
  </nav>

<hr>-->

<!-- BRIL APP STARTS HERE! -->
 <!-- <div class="container" id="chart-container">
    <div class="row">
      <div class="col-md-3" id="lhs">
        <div id="select-views" style="padding: 5px 0"></div>--> <!-- #select-views -->
     <!-- </div>--> <!-- .col-md-3 #lhs -->

      <!--<div class="col-md-9" id='rhs'>-->
        <!--<div class="row" id='control-panel'>-->
          <!--<div class="bcm1f">-->
            <!--<form>--> <!-- the form for managing the BCM1F masks -->
              <!--<div id="bcm1f_mask-management" class="form-group">-->
                <!--<div class="input-group" id="BCM1F_1Mask" class="pull-left">
                  <span class="input-group-addon">BCM1F_1:
                    <label class="checkbox-inline"><input id="BCM1F_1-1" type="checkbox">1&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-2" type="checkbox">2&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-3" type="checkbox">3&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-4" type="checkbox">4&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-5" type="checkbox">5&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-6" type="checkbox">6&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-7" type="checkbox">7&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-8" type="checkbox">8&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-9" type="checkbox">9&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-10" type="checkbox">10&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-11" type="checkbox">11&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_1-12" type="checkbox">12&nbsp;&nbsp;</input></label>
                  </span>
                </div>--><!-- /input-group -->

                <!--<div class="input-group" id="BCM1F_2Mask" class="pull-left">
                  <span class="input-group-addon">BCM1F_2:
                    <label class="checkbox-inline"><input id="BCM1F_2-1" type="checkbox">1&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-2" type="checkbox">2&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-3" type="checkbox">3&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-4" type="checkbox">4&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-5" type="checkbox">5&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-6" type="checkbox">6&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-7" type="checkbox">7&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-8" type="checkbox">8&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-9" type="checkbox">9&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-10" type="checkbox">10&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-11" type="checkbox">11&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_2-12" type="checkbox">12&nbsp;&nbsp;</input></label>
                  </span>
                </div>--><!-- /input-group -->

                <!--<div class="input-group" id="BCM1F_3Mask" class="pull-left">
                  <span class="input-group-addon">BCM1F_3:
                    <label class="checkbox-inline"><input id="BCM1F_3-1" type="checkbox">1&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-2" type="checkbox">2&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-3" type="checkbox">3&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-4" type="checkbox">4&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-5" type="checkbox">5&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-6" type="checkbox">6&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-7" type="checkbox">7&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-8" type="checkbox">8&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-9" type="checkbox">9&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-10" type="checkbox">10&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-11" type="checkbox">11&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_3-12" type="checkbox">12&nbsp;&nbsp;</input></label>
                  </span>
                </div>--><!-- /input-group -->

                <!--<div class="input-group" id="BCM1F_4Mask" class="pull-left">
                  <span class="input-group-addon">BCM1F_4:
                    <label class="checkbox-inline"><input id="BCM1F_4-1" type="checkbox">1&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-2" type="checkbox">2&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-3" type="checkbox">3&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-4" type="checkbox">4&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-5" type="checkbox">5&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-6" type="checkbox">6&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-7" type="checkbox">7&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-8" type="checkbox">8&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-9" type="checkbox">9&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-10" type="checkbox">10&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-11" type="checkbox">11&nbsp;&nbsp;</input></label>
                    <label class="checkbox-inline"><input id="BCM1F_4-12" type="checkbox">12&nbsp;&nbsp;</input></label>
                  </span>
                </div>--><!-- /input-group -->

              <!--</div>--><!--  // bcm1f_mask-management -->
              <!--<button type="submit" class="btn btn-default" id="bcm1f_mask-channels">Mask selected channels</button>
              <span id="bcm1f_mask-message" style="padding:10px 20px"></span>
            </form> --><!-- end of BCM1f mask-management form -->
          <!--</div>--> <!-- .bcm1f -->

      <!--</div>--> <!-- .col-md-9 #rhs -->
   <!-- </div>--> <!-- .row -->
  <!--</div>--> <!-- .container #chart-container -->

<!--<hr>-->
    <script src="js/vendor/jquery-1.11.1.min.js"></script>
    <script src="js/vendor/highcharts.js"></script>
    <script src="js/vendor/highcharts-more.js"></script>
    <script src="js/vendor/modules/data.js"></script>
    <script src="js/vendor/modules/exporting.js"></script>
    <script src="js/vendor/modules/heatmap.js"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/utility.js"></script>
    <!-- various utility functions & global variables -->
    <!--<script src="js/bcm1f_data.js"></script>--> <!-- BCM1f display code -->
    <!--<script src="js/bcm1f_mask.js"></script>--> <!-- BCM1f mask-handling code -->
    <!--<script src="js/demo_basic_area.js"></script>
    <script src="js/demo_zoomable_time_series.js"></script>
    <script src="js/demo_line_graph.js"></script>
    <script src="js/demo_wind_rose.js"></script>
    <script src="js/demo_heatmap.js"></script>
    <script src="js/demo_multiple_axes.js"></script>
    <script src="js/demo_bcml.js"></script>-->
    <script src="js/static.js"></script>
    <script src="js/dynamic.js"></script>
    <button id="button1">Start Timer</button>
    <button id="button2">Stop Timer</button>
    <p id="basicExample">   
    </p>
    Date:<input id="dateinput1" type="text" placeholder="yyyy-mm-dd"/> to
    <input id="dateinput2" type="text" placeholder="yyyy-mm-dd"/>
    <br>
    Time:<input id="timeinput1" type="text" placeholder="HH:mm:ss"/> to
    <input id="timeinput2" type="text" placeholder="HH:mm:ss"/>
    <!-- include input widgets; this is independent of Datepair.js -->
    <script type="text/javascript" src="js/vendor/lib/jquery.ptTimeSelect.js"></script>
    <link rel="stylesheet" type="text/css" href="js/vendor/lib/jquery.ptTimeSelect.css" />
    <link rel="stylesheet" type="text/css" href="js/vendor/jquery-timepicker-1.3.2/jquery.timepicker.css" />
    <link rel="stylesheet" type="text/css" href="js/vendor/lib/bootstrap-datepicker.css" />
    <script type="text/javascript" src="js/vendor/lib/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="js/vendor/jquery-timepicker-1.3.2/jquery.timepicker.js"></script>
    <!--<script type="text/javascript" src="js/vendor/src/Datepair.js"></script>-->
    <script type="text/javascript" src="js/vendor/dist/datepair.js"></script>
    <script>
        // initialize input widgets first
        /*$('#basicExample .time').timepicker({
            'timeFormat': 'HH:mm:ss',
            
        });*/
        /*$('#basicExample .date').datepicker({
            'format': 'm/d/yyyy',
            //'autoclose': true,
            onSelect: function(dateText, inst) {
                var dateAsString = dateText; //the first parameter of this function
                var dateAsObject = $(this).datepicker( "getDate" ); //the getDate method
                console.log(dateAsString);
                console.log(dateAsObject);
            }
        });*/
        /*$("#basicExample .start").on("change",function(){
            var selected = $(this).val();
            console.log(selected);
        });*/
        var datestart;
        var dateend;
        var timestart;
        var timeend;
        $('#dateinput1').on("keypress", function(e) {
            if (e.keyCode == 13) {
                console.log($('#dateinput1').val());
                datestart=$('#dateinput1').val();
                //return false; // prevent the button click from happening
            }
        });
        $('#dateinput2').on("keypress", function(e) {
            if (e.keyCode == 13) {
                console.log($('#dateinput2').val());
                dateend=$('#dateinput2').val();
                return false; // prevent the button click from happening
            }
        });
        $('#timeinput1').on("keypress", function(e) {
            if (e.keyCode == 13) {
                console.log($('#timeinput1').val());
                timestart=$('#timeinput1').val();
                return false; // prevent the button click from happening
            }
        });
        $('#timeinput2').on("keypress", function(e) {
            if (e.keyCode == 13) {
                console.log($('#timeinput2').val());
                timeend=$('#timeinput2').val();
                return false; // prevent the button click from happening
            }
        });
        // initialize datepair
        var basicExampleEl = document.getElementById('basicExample');
        var datepair = new Datepair(basicExampleEl);
    </script>
    <br><br>
    <button id="button3">Refresh Static Graph</button>
    <div id="container1" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <hr style="height:2.5px;border:none;color:#333;background-color:#333;" />
    <button id="button4">Refresh Dynamic Graph</button>
    <div id="container2" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <script>
        $( "#button1" ).click(function(){
            $.ajax({
               url: "http://localhost:9234/estest/startpolling",
               /*success: function(response){
                   alert('success');
                },*/
                error: function(response){
                   alert('failure');
                }
            }).done(function(output){
                 alert(output)
               }) 
        });
    </script>
    <script>
        $( "#button2" ).click(function(){
            $.ajax({
               url: "http://localhost:9234/estest/stoppolling",
               /*success: function(){
                   alert('success');
               },*/
               error: function(){
                   alert('failure');
               }
            }).done(function(output){
                 alert(output)
               })
        });
    </script>
    <script>
        $( "#button3" ).click(function(){
            //var datestart=$('#dateinput1').val();
            /*console.log(datestart);
            var dateend=$('#dateinput2').val();
            var timestart=$('#timeinput1').val();
            var timeend=$('#timeinput2').val()*/
            var urlstr="http://localhost:9234/_search?size=30&"+"range=Timestamp.gte."+datestart+"T"+timestart+",Timestamp.lte."+dateend+"T"+timeend;
            $.ajax({
                url: urlstr,
                type: "POST",
                dataType: "text",
                /*success: function(){
                    alert('success');
                },*/
                error: function(){
                    alert('failure');
                }
             }).done(function(output){
                    //console.log(output);
                    var result=[];
                    var resultfinal=[];
                    result=JSON.parse(output);
                    for (var j=0;j<result.length;j++) {
                        resultfinal.push(JSON.parse(result[j]));
                    }
                    staticgraph_options.series = [{
                        name: "Channel_2",
                        data: (function () {
                            var arr = [];
                            for (var i = 0; i < resultfinal.length; i += 1) {
                                arr.push({
                                    x: (new Date(resultfinal[i].Timestamp)).getTime(),
                                    y: resultfinal[i].Percentabort1[2]
                                });
                            }
                            arr.reverse();
                            return arr;
                        }())
                    },
                    {
                        name: "Channel_10",
                        data: (function () {
                            var arr = [];
                            for (var i = 0; i < resultfinal.length; i += 1) {
                                arr.push({
                                    x: (new Date(resultfinal[i].Timestamp)).getTime(),
                                    y: resultfinal[i].Percentabort1[10]
                                });
                            }
                            arr.reverse();
                            return arr;
                        }())
                    },
                    {
                        name: "Channel_12",
                        data: (function () {
                            var arr = [];
                            for (var i = 0; i < resultfinal.length; i += 1) {
                                arr.push({
                                    x: (new Date(resultfinal[i].Timestamp)).getTime(),
                                    y: resultfinal[i].Percentabort1[12]
                                });
                            }
                            arr.reverse();
                            return arr;
                        }())
                    }
                    ];
                    staticgraph_options.subtitle={ text: 'Start Time:'+resultfinal[resultfinal.length-1].Timestamp+'     '+'End Time:'+resultfinal[0].Timestamp};
                    var chart = new Highcharts.Chart(staticgraph_options);   
             });
        });
    </script>
    <script>
        $( "#button4" ).click(function(){
            $.ajax({
                url: "http://localhost:9234/_search?size=10",
                type: "POST",
                dataType: "text",
                /*success: function(){
                    alert('success');
                },*/
                error: function(){
                    alert('failure');
                }
            }).done(function(output){
                    console.log("In dynamic graph");
                    var result=[];
                    var resultfinal=[];
                    result=JSON.parse(output);
                    for (var j=0;j<result.length;j++) {
                        resultfinal.push(JSON.parse(result[j]));
                    }
                    dynamicgraph_options.series = [{
                        name: "Result",
                        data: (function () {
                            var arr = [];
                            for (var i = 0; i < resultfinal.length; i += 1) {
                                arr.push({
                                    x: (new Date(resultfinal[i].Timestamp)).getTime(),
                                    y: resultfinal[i].Percentabort1[2]
                                });
                            }
                            arr.reverse();
                            return arr;
                        }())
                    }];
                    console.log("highcharts");
                    var chart1 = new Highcharts.Chart(dynamicgraph_options);
            });
        });
    </script>
    <!--<script src="js/demo_multiple_template.js"></script>-->

    <!-- TEMPLATE: add your javascript file here. Change my_view to the name of your view -->
    <!-- TEMPLATE: don't forget to remove the '!-- ' from the start of script declaration! -->
    <!-- TEMPLATE: also remove the closing comment on the same line! -->
    <!-- script src="js/my_view.js"></script>
    <!-- end of TEMPLATE: -->

   <!-- <script src="js/main.js"></script> --> <!-- main program driver. Don't add anything below here --> 
  </body>
</html>
